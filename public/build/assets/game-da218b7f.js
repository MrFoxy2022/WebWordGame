const t=document.getElementById("game")?document.getElementById("game").dataset.length:0,c=document.getElementById("game")?document.getElementById("game").dataset.attempts:0,_=document.getElementById("game")?document.getElementById("game").dataset.id:0,w=document.getElementById("win_text"),y=document.getElementById("password_view"),r=document.getElementById("private_lobby");let o="";const p=function(s){for(let l=0;l<c;l++)for(let e=0;e<t;e++){let a=l*t+e+1,n=document.getElementById("letter-"+a);a>=Math.floor((s-1)/t)*t+1&&a<=s&&(n.classList.remove("text-light"),n.classList.add("text-success")),w.classList.remove("d-none"),n.disabled=!0}},v=function(s,l=null){let e=new XMLHttpRequest;return e.open("POST",s,!1),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.withCredentials=!0,e.send(JSON.stringify(l)),e.status==200?JSON.parse(e.responseText):!1};if(c)for(let s=0;s<c;s++)for(let l=0;l<t;l++){let e=s*t+l+1;document.getElementById("letter-"+e).onkeyup=a=>{let n=String.fromCharCode(a.keyCode),m=document.getElementById("letter-"+e),h=document.getElementById("letter-"+(e+1)),u=document.getElementById("letter-"+(e-1));if(n.match(/^[a-zA-Z]*$/)){if(h&&h.focus(),o+=n,e%t===0||e===t*c){let i=v("/game/check",{id:_,word:o});if(o="",i.data.status==="ok"){let g=0;for(let f=Math.floor((e-1)/t)*t+1;f<=e;f++){let d=document.getElementById("letter-"+f);i.data.letter[g]===2?(d.classList.remove("text-light"),d.classList.add("text-success")):i.data.letter[g]===1?(d.classList.remove("text-light"),d.classList.add("text-warning")):(d.classList.remove("text-light"),d.classList.add("text-white-50")),g++,d.disabled=!0}}else i.data.status==="win"&&p(e)}m.value=n}else a.keyCode===8?(o=o.substring(0,o.length-1),u?(u.focus(),u.value=""):m.value=""):m.value=""}}r&&r.checked&&y.classList.remove("d-none");r&&(r.onchange=()=>{r.checked?y.classList.remove("d-none"):y.classList.add("d-none")});
